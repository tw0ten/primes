<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />

		<title>primes/spiral</title>

		<style>
			* {
				margin: 0;
				width: 100%;
				height: 100%;
				background: #000000;
				position: fixed;
			}
		</style>
	</head>
	<body>
		<canvas id="i" style="image-rendering: pixelated"></canvas>
		<script>
			const i = document.getElementById("i").getContext("2d");
			const l = [2];
			let w, h, wh, hh, m;

			window.onresize = () => {
				w = i.canvas.width = i.canvas.clientWidth;
				h = i.canvas.height = i.canvas.clientHeight;
				i.fillStyle = "rgba(255,255,255,0.8)";
				wh = w / 2;
				hh = h / 2;
				m = Math.max(wh, hh);
			};
			window.onresize();

			const p = (n) => {
				for (let i = 2; i * i <= n; ++i) if (n % i === 0) return false;
				return true;
			};

			const n = (f) => {
				while (!p(++f));
				return f;
			};

			const a = () => {
				const s = l[l.length - 1], r = m / s;
				l.push(n(s));
				i.clearRect(0, 0, w, h);
				for (const n of l) {
					const c = r * n;
					i.fillRect(
						wh + c * Math.cos(n),
						hh + c * Math.sin(n),
						1,
						1,
					);
				}
				window.requestAnimationFrame(a);
			};

			a();
		</script>
	</body>
</html>
